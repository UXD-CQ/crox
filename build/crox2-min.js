/*
 Crox v1.4.9
 https://github.com/thx/crox

 Released under the MIT license
 md5: b5875bc1d954765e524f0424c7626e09
*/
KISSY.add("crox",function(){function u(b,a){this.row=b;this.col=a}function w(b,a){var c=b.substring(0,a),g=c.match(/\r\n?|\n/g),p=1;g&&(p+=g.length);c=1+/[^\r\n]*$/.exec(c)[0].length;return new u(p,c)}function A(b){return'"'+b.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(a){switch(a){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+a.charCodeAt(0).toString(16)).slice(-4)})+
'"'}function B(b){return eval(b)}function C(b){function a(a,h,b,c,q,k){this.tag=a;this.text=h;this.index=b;this.subMatches=c;this.end=q;this.pos=k}function c(){}function g(a){return"function"==typeof a?a:function(){return a}}function p(a){for(var h=1,b=[],t=[1],q=[],k=0;k<a.length;++k)t.push(h+=RegExp("|"+a[k][0].source).exec("").length),q.push(a[k][1]?g(a[k][1]):c),b.push("("+a[k][0].source+")");return[RegExp(b.join("|")+"|","g"),t,q]}a.prototype.toString=function(){return this.text};var f=b.$||
"$",d={},h;for(h in b)"$"!=h.charAt(0)&&(d[h]=p(b[h]));return function(h){var b=h.length,c=0,t=[""],q={text:"",index:0,source:h,pushState:function(a){t.push(a)},popState:function(){t.pop()},retract:function(a){c-=a}},k=new u(1,1),g=/\r\n?|\n/g,p=/[^\r\n\u2028\u2029]*$/;return{scan:function(){do{var l;a:{var m=d[t[t.length-1]],n=m[0];n.lastIndex=c;l=n.exec(h);if(""==l[0]){if(c<b)throw Error("lexer error: "+k+"\n"+h.slice(c,c+50));l=new a(f,"",c,null,c,k)}else{q.index=c;c=n.lastIndex;for(var n=m[1],
e=0;e<n.length;++e)if(l[n[e]]){m=m[2][e].apply(q,l.slice(n[e],n[e+1]));l=new a(m,l[0],q.index,l.slice(n[e]+1,n[e+1]),c,k);break a}l=void 0}}m=k.row;n=k.col;e=(e=l.text.match(g))?e.length:0;m+=e;n=0==e?n+l.text.length:p.exec(l.text)[0].length+1;k=new u(m,n);if(null!=l.tag)return l}while(1)},GetCurrentPosition:function(){return k},getPos:function(a){return w(h,a)}}}}function y(b,a,c,g,p){var f="";c=c?c.replace(/^_+/,"$&$&"):"_"+v++;if(/^\w+$/.test(b))var d=b;else d="_"+v++,f="var "+d+" = "+b+";";return f+
("for(var "+c+(p?"=0;"+c+"<"+d+".length; ++"+c:" in "+d)+"){var "+g+" = "+d+"["+c+"];"+a+"}")}function z(b){v=0;return E(F(b))}u.prototype.toString=function(){return"("+this.row+","+this.col+")"};var F=function(){var b=[[/\s+/],[/\/\/[^\r\n]*|\/\*[\s\S]*?\*\//],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";case "set":case "include":case "null":return a;default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+
a+" ")||"null"==a)throw Error("Reserved: "+a+" "+w(this.source,this.index));return"realId"}}],[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[/{(?!{)/,function(a){return"{"}],[/}(?!})/,function(a){return"}"}],[function(a){a.sort().reverse();for(var b=0;b<a.length;++b)a[b]=a[b].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !== == != , : ?".split(" ")),function(a){return/[*/%]/.test(a)?
"mul":/[<>]/.test(a)?"rel":/[!=]=/.test(a)?"eq":a}]];return C({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"text"}],[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each|\/forin|\/raw)}}/,function(a){return a}],[/{{#raw}}/,function(a){this.pushState("raw");return a}],[/{{<script>[\s\S]*?<\/script>}}/,function(a){return"script"}],[/{{\*[\s\S]*?\*}}/],[/{{(?!\*)(?:#(?:if|each|forin)(?=\s))?/,function(a){this.pushState("{{");return a}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(a){this.popState();
return"rawtext"}]],"{{":b.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":b.concat([[/}}}/,function(a){this.popState();return a}]])})}(),E=function(){return function(b){function a(a,h){return d[a][h]}for(var c=b.nStart,g=b.tSymbols,p={},f=0;f<g.length;++f)p[g[f]]=f;var d=b.tAction,h=b.tGoto,D=b.tRules,x=b.tFuncs,r=b.actionIndex;r&&(a=function(a,h){var b=d[r[a]];return b[h]||b._});return function(b,q){function k(a){throw Error("Syntax error: "+b.getPos(l.index)+(a?"\n"+a:""));}var d=0,
r=[0],l=b.scan(),m=[],n={get:function(a){return m[m.length+a]},set:function(a,h){m[m.length+a]=h}};if(q)for(var e in q)n[e]=q[e];for(;;)if(e=a(d,p[l.tag]))if(0<e)r.push(d=e),m.push(l),l=b.scan();else if(0>e&&-32768<e){e=-e;var d=D[e],f=d.length-1;r.length-=f;d=h[r[r.length-1]][d[0]-c];r.push(d);x[e]?(e=x[e].apply(n,m.splice(m.length-f,f)),m.push(e)):1!=f&&m.splice(m.length-f,f,null)}else return l.tag!=g[0]&&k(),m[0];else{e=[];for(f=0;f<c;++f)a(d,f)&&e.push(g[f]);k("find "+l.tag+"\nexpect "+e.join(" "))}}}({nStart:37,
tSymbols:"$ ! && ( ) + , - . = [ ] boolean eq include mul number rawtext realId rel set string text {{ {{#each {{#forin {{#if {{#raw}} {{/each}} {{/forin}} {{/if}} {{/raw}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression _text args epsilon expr id name program statement statements texts".split(" "),tAction:[{_:-2},{_:-32768},{22:3,23:4,24:5,25:6,26:7,
27:8,33:9,_:-1},{_:-19},{1:13,3:14,7:15,12:16,14:17,16:18,18:19,20:20,21:21,_:0},{1:13,3:14,7:15,12:16,14:33,16:18,18:19,20:34,21:21,_:0},{17:38,_:0},{_:-17},{_:-3},{22:3,27:8,_:-13},{_:-26},{21:44,_:-23},{_:-25},{_:-21},{14:33,18:19,20:34,_:-22},{_:-24},{5:46,7:47,_:-44},{13:48,_:-48},{2:49,_:-50},{34:50,_:-52},{3:51,8:52,10:53,_:-36},{15:54,_:-41},{_:-29},{19:55,_:-46},{_:-39},{35:56,_:0},{_:-27},{_:-23},{_:-22},{14:33,18:19,20:34,21:57,_:0},{35:61,_:0},{31:62,_:0},{36:63,_:0},{_:-18},{_:-37},{4:64,
_:0},{_:-38},{35:65,_:0},{9:66,_:0},{1:13,3:14,7:15,12:16,14:33,16:18,18:19,20:34,21:21,_:-53},{14:33,18:19,20:34,_:0},{_:-11},{_:-15},{_:-16},{14:33,18:19,20:34,21:57,_:-53},{_:-20},{_:-12},{_:-28},{_:-14},{15:54,_:-42},{15:54,_:-43},{19:55,_:-47},{13:48,_:-49},{2:49,_:-51},{4:85,6:86,_:0},{4:87,_:0},{_:-34},{_:-30},{11:88,_:0},{_:-40},{5:46,7:47,_:-45},{35:89,_:0},{35:90,_:0},{35:91,_:0},{35:92,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,30:93,32:94,33:9,_:0},{35:95,_:0},{_:-33},{_:-32},{_:-31},{_:-4},
{_:-10},{_:-35},{22:3,23:4,24:5,25:6,26:7,27:8,28:102,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,28:103,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,29:104,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,29:105,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,30:106,33:9,_:0},{_:-6},{_:-7},{_:-8},{_:-9},{_:-5}],actionIndex:[0,1,2,3,4,5,5,5,6,5,7,8,9,5,5,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,38,5,5,5,5,5,39,40,5,5,5,41,42,43,44,44,0,45,46,47,48,5,49,50,51,52,53,54,55,
56,57,58,59,60,61,62,63,64,65,66,67,5,68,69,0,0,0,0,70,0,71,72,73,74,75,76,77,78,79,80,81,82],tGoto:[{15:1,17:2},,{9:10,16:11,18:12},,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:31,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:35,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:36,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:37,13:32},,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:39,13:32},,,{9:40},{4:26,6:28,8:41,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,
8:30,12:42,13:32},{4:26,6:28,8:43,13:32},,,,,{13:45},,,,,,,,,,,,,,,{13:58,14:59},{13:58,14:60},,,,,,,,,,{4:26,5:67,6:28,8:30,13:32},{4:26,5:68,6:28,8:30,13:32},{0:22,4:26,5:27,6:28,7:69,8:30,13:32},{0:22,1:70,4:26,5:27,6:28,7:29,8:30,13:32},{0:22,1:23,2:71,4:26,5:27,6:28,7:29,8:30,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,10:72,11:73,12:74,13:32},{13:75},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:76,13:32},{4:26,6:28,8:77,13:32},{0:78,4:26,5:27,6:28,8:30,13:32},,,,{11:79,13:58,14:80},
{11:81,13:58,14:82},{17:83},,,,,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:84,13:32},,,,,,,,,,,,,,,,,{9:10,16:11,18:12},,,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:96,13:32},,,{17:97},{17:98},{17:99},{17:100},,{17:101},,,{9:10,16:11,18:12},{9:10,16:11,18:12},{9:10,16:11,18:12},{9:10,16:11,18:12},{9:10,16:11,18:12}],tRules:[[56,52],[52,54],[54],[54,54,53],[53,26,49,35,54,30],[53,26,49,35,54,32,54,30],[53,24,49,51,48,35,54,28],[53,24,49,51,51,35,54,28],[53,25,49,51,48,35,54,29],[53,25,
49,51,51,35,54,29],[53,23,20,50,9,49,35],[53,23,49,35],[53,33,49,36],[53,55],[53,23,14,21,35],[51,21],[51,50],[55,46],[55,55,46],[46,22],[46,27,17,31],[50,18],[50,20],[50,14],[43,21],[43,16],[43,12],[43,50],[43,3,49,4],[41,43],[41,41,8,50],[41,41,10,49,11],[41,41,3,48,4],[41,41,3,47,4],[47,49],[47,47,6,49],[45,41],[45,1,45],[45,7,45],[42,45],[42,42,15,45],[37,42],[37,37,5,42],[37,37,7,42],[44,37],[44,44,19,37],[38,44],[38,38,13,44],[39,38],[39,39,2,38],[40,39],[40,40,34,39],[49,40],[48]],tFuncs:function(){function b(a,
b){return a+b}function a(a,b,c,d,f,g,k){return y(b,g,d,c,!1)}function c(a,b,c,d,f,g,k){return y(b,g,d,c,!1)}function g(a){return a.text}function p(a){return a}function f(a,b,c,d){return a+"("+(c||"")+")"}function d(a,b,c){return a+b.text+c}return[,function(a){return Function("root","var _obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\r\n\tfunction _htmlEncode(s) {\r\n\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\r\n\t\t\treturn _obj[c];\r\n\t\t});\r\n\t}var _t,_s = '';function _print(s,e){if(s!=null){if(e)s=_htmlEncode(s);_s+=s;}}"+
a+"return _s;")},function(){return""},b,function(a,b,c,d,f){return"if("+b+"){"+d+"}"},function(a,b,c,d,f,g,k){return"if("+b+"){"+d+"}else{"+g+"}"},a,a,c,c,function(a,b,c,d,f,g){return"var "+c.text.replace(/^_+/,"$&$&")+"="+f+";"},function(a,b,c){return"_print("+b+",1);"},function(a,b,c){return"_print("+b+");"},function(a){return"_print("+A(a)+");"},function(a,b,c,d){throw Error("unimplemented: include");},function(a){return B(a.text)},g,p,b,g,function(a,b,c){return b.text},,,,g,g,g,function(a){return a.text.replace(/^_+/,
"$&$&")},function(a,b,c){return"("+b+")"},,function(a,b,c){return a+"."+c},function(a,b,c,d){return a+"["+c+"]"},f,f,p,function(a,b,c){return a+","+c},,function(a,b){return"!"+b},function(a,b){return"- "+b},,d,,d,function(a,b,c){return a+"- "+c},,d,,d,,d,,d]}()})}(),v=0;return{compile:z,render:function(b,a){return z(b)(a)}}});
